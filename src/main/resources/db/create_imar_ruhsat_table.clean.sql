
CREATE TABLE IMAR_RUHSAT (
    ID NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    BASVURU_NO VARCHAR2(50) NOT NULL UNIQUE,
    BASVURU_TARIHI DATE NOT NULL,
    BASVURU_TURU VARCHAR2(50) NOT NULL,
    BASVURU_DURUMU VARCHAR2(50) NOT NULL,
    
    -- Başvuru sahibi bilgileri
    BASVURU_SAHIBI_ADI VARCHAR2(100) NOT NULL,
    BASVURU_SAHIBI_SOYADI VARCHAR2(100) NOT NULL,
    BASVURU_SAHIBI_TCNO VARCHAR2(11) NOT NULL,
    BASVURU_SAHIBI_TELEFON VARCHAR2(20),
    BASVURU_SAHIBI_EMAIL VARCHAR2(100),
    
    -- Arsa bilgileri
    ARSA_ADRESI VARCHAR2(500) NOT NULL,
    ARSA_PARSEL_NO VARCHAR2(20),
    ARSA_ADA_NO VARCHAR2(20),
    ARSA_PAFTA_NO VARCHAR2(20),
    ARSA_ALANI NUMBER(10,2),
    
    -- Yapı bilgileri
    YAPI_ALANI NUMBER(10,2),
    KAT_SAYISI NUMBER(3),
    DAIRE_SAYISI NUMBER(3),
    YAPI_TURU VARCHAR2(50),
    YAPI_KULLANIM_AMACI VARCHAR2(200),
    
    -- Proje bilgileri
    PROJE_MIMARI VARCHAR2(100),
    PROJE_MUHENDISI VARCHAR2(100),
    PROJE_TARIHI DATE,
    
    -- Ruhsat bilgileri
    RUHSAT_NO VARCHAR2(50),
    RUHSAT_TARIHI DATE,
    RUHSAT_GECERLILIK_TARIHI DATE,
    
    -- Onay bilgileri
    ONAY_MAKAMI VARCHAR2(100),
    ONAY_TARIHI DATE,
    RED_SEBEBI VARCHAR2(1000),
    
    -- Diğer bilgiler
    NOTLAR VARCHAR2(2000),
    DOSYA_YOLU VARCHAR2(500),
    
    -- Sistem alanları
    AKTIF NUMBER(1) DEFAULT 1 NOT NULL,
    OLUSTURMA_TARIHI TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    GUNCELLEME_TARIHI TIMESTAMP,
    OLUSTURAN_KULLANICI VARCHAR2(100),
    GUNCELLEYEN_KULLANICI VARCHAR2(100)
);

CREATE INDEX IDX_IMAR_RUHSAT_BASVURU_NO ON IMAR_RUHSAT(BASVURU_NO);
CREATE INDEX IDX_IMAR_RUHSAT_TCNO ON IMAR_RUHSAT(BASVURU_SAHIBI_TCNO);
CREATE INDEX IDX_IMAR_RUHSAT_DURUM ON IMAR_RUHSAT(BASVURU_DURUMU);
CREATE INDEX IDX_IMAR_RUHSAT_TUR ON IMAR_RUHSAT(BASVURU_TURU);
CREATE INDEX IDX_IMAR_RUHSAT_TARIH ON IMAR_RUHSAT(BASVURU_TARIHI);
CREATE INDEX IDX_IMAR_RUHSAT_AKTIF ON IMAR_RUHSAT(AKTIF);

COMMENT ON TABLE IMAR_RUHSAT IS 'İmar ve Ruhsat Başvuruları Tablosu';
COMMENT ON COLUMN IMAR_RUHSAT.ID IS 'Birincil Anahtar';
COMMENT ON COLUMN IMAR_RUHSAT.BASVURU_NO IS 'Başvuru Numarası';
COMMENT ON COLUMN IMAR_RUHSAT.BASVURU_TARIHI IS 'Başvuru Tarihi';
COMMENT ON COLUMN IMAR_RUHSAT.BASVURU_TURU IS 'Başvuru Türü (YAPI_RUHSATI, ISKAN_RUHSATI, IMAR_DURUMU, TADILAT_RUHSATI)';
COMMENT ON COLUMN IMAR_RUHSAT.BASVURU_DURUMU IS 'Başvuru Durumu (BEKLEMEDE, INCELENIYOR, ONAYLANDI, REDDEDILDI, TAMAMLANDI)';
COMMENT ON COLUMN IMAR_RUHSAT.BASVURU_SAHIBI_ADI IS 'Başvuru Sahibinin Adı';
COMMENT ON COLUMN IMAR_RUHSAT.BASVURU_SAHIBI_SOYADI IS 'Başvuru Sahibinin Soyadı';
COMMENT ON COLUMN IMAR_RUHSAT.BASVURU_SAHIBI_TCNO IS 'Başvuru Sahibinin TC Kimlik No';
COMMENT ON COLUMN IMAR_RUHSAT.BASVURU_SAHIBI_TELEFON IS 'Başvuru Sahibinin Telefon Numarası';
COMMENT ON COLUMN IMAR_RUHSAT.BASVURU_SAHIBI_EMAIL IS 'Başvuru Sahibinin E-posta Adresi';
COMMENT ON COLUMN IMAR_RUHSAT.ARSA_ADRESI IS 'Arsa Adresi';
COMMENT ON COLUMN IMAR_RUHSAT.ARSA_PARSEL_NO IS 'Arsa Parsel Numarası';
COMMENT ON COLUMN IMAR_RUHSAT.ARSA_ADA_NO IS 'Arsa Ada Numarası';
COMMENT ON COLUMN IMAR_RUHSAT.ARSA_PAFTA_NO IS 'Arsa Pafta Numarası';
COMMENT ON COLUMN IMAR_RUHSAT.ARSA_ALANI IS 'Arsa Alanı (m²)';
COMMENT ON COLUMN IMAR_RUHSAT.YAPI_ALANI IS 'Yapı Alanı (m²)';
COMMENT ON COLUMN IMAR_RUHSAT.KAT_SAYISI IS 'Kat Sayısı';
COMMENT ON COLUMN IMAR_RUHSAT.DAIRE_SAYISI IS 'Daire Sayısı';
COMMENT ON COLUMN IMAR_RUHSAT.YAPI_TURU IS 'Yapı Türü (KONUT, TICARI, ENDUSTRIYEL, KAMU)';
COMMENT ON COLUMN IMAR_RUHSAT.YAPI_KULLANIM_AMACI IS 'Yapı Kullanım Amacı';
COMMENT ON COLUMN IMAR_RUHSAT.PROJE_MIMARI IS 'Proje Mimarı';
COMMENT ON COLUMN IMAR_RUHSAT.PROJE_MUHENDISI IS 'Proje Mühendisi';
COMMENT ON COLUMN IMAR_RUHSAT.PROJE_TARIHI IS 'Proje Tarihi';
COMMENT ON COLUMN IMAR_RUHSAT.RUHSAT_NO IS 'Ruhsat Numarası';
COMMENT ON COLUMN IMAR_RUHSAT.RUHSAT_TARIHI IS 'Ruhsat Tarihi';
COMMENT ON COLUMN IMAR_RUHSAT.RUHSAT_GECERLILIK_TARIHI IS 'Ruhsat Geçerlilik Tarihi';
COMMENT ON COLUMN IMAR_RUHSAT.ONAY_MAKAMI IS 'Onay Makamı';
COMMENT ON COLUMN IMAR_RUHSAT.ONAY_TARIHI IS 'Onay Tarihi';
COMMENT ON COLUMN IMAR_RUHSAT.RED_SEBEBI IS 'Red Sebebi';
COMMENT ON COLUMN IMAR_RUHSAT.NOTLAR IS 'Notlar';
COMMENT ON COLUMN IMAR_RUHSAT.DOSYA_YOLU IS 'Dosya Yolu';
COMMENT ON COLUMN IMAR_RUHSAT.AKTIF IS 'Aktif Durumu (1: Aktif, 0: Pasif)';
COMMENT ON COLUMN IMAR_RUHSAT.OLUSTURMA_TARIHI IS 'Oluşturma Tarihi';
COMMENT ON COLUMN IMAR_RUHSAT.GUNCELLEME_TARIHI IS 'Güncelleme Tarihi';
COMMENT ON COLUMN IMAR_RUHSAT.OLUSTURAN_KULLANICI IS 'Oluşturan Kullanıcı';
COMMENT ON COLUMN IMAR_RUHSAT.GUNCELLEYEN_KULLANICI IS 'Güncelleyen Kullanıcı';

INSERT INTO IMAR_RUHSAT (
    BASVURU_NO, BASVURU_TARIHI, BASVURU_TURU, BASVURU_DURUMU,
    BASVURU_SAHIBI_ADI, BASVURU_SAHIBI_SOYADI, BASVURU_SAHIBI_TCNO,
    BASVURU_SAHIBI_TELEFON, BASVURU_SAHIBI_EMAIL, ARSA_ADRESI,
    ARSA_PARSEL_NO, ARSA_ADA_NO, ARSA_ALANI, YAPI_ALANI,
    KAT_SAYISI, DAIRE_SAYISI, YAPI_TURU, YAPI_KULLANIM_AMACI,
    PROJE_MIMARI, PROJE_MUHENDISI, NOTLAR, AKTIF
) VALUES (
    'IR20241201001', DATE '2024-12-01', 'YAPI_RUHSATI', 'BEKLEMEDE',
    'Ahmet', 'Yılmaz', '12345678901',
    '05321234567', 'ahmet.yilmaz@email.com', 'Gebze Merkez Mahallesi 123. Sokak No:45',
    '123', '45', 500.00, 300.00,
    3, 6, 'KONUT', 'Konut Yapısı',
    'Mehmet Demir', 'Ali Kaya', 'Örnek başvuru', 1
);

SELECT 'IMAR_RUHSAT tablosu başarıyla oluşturuldu!' AS MESAJ FROM DUAL;
